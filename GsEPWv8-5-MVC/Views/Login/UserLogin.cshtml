@model GsEPWv8_5_MVC.Model.LoginModel
@{
    Layout = null;

}
<link href="~/Scripts/stylesheet.css" rel="stylesheet" />

<style>
    div#ajaxLoading {
        display: none;
        width: 100px;
        height: 100px;
        position: fixed;
        top: 40%;
        left: 53%;
        text-align: center;
        margin-left: -50px;
        margin-top: -50px;
        z-index: 2;
        overflow: auto;
    }
     .sweet-alert {
        background-color: #8cd6f7;
        width: 478px;
        padding: 17px;
        border-radius: 5px;
        text-align: center;
        position: fixed;
        left: 50%;
        top: 50%;
        margin-left: -256px;
        margin-top: -200px;
        overflow: hidden;
        display: none;
        z-index: 2000;
    }
       .text-muted {
        color: #777;
    }

    .lead {
        font-size: 21px;
    }

</style>


<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" type="image/ico" href="~/Images/Gs3PL.ico" width="10" height="10" />
    <title>Gs-3PLv8-4 | Log in</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../dist/css/AdminLTE.min.css">
    <!-- iCheck -->
    <link rel="stylesheet" href="../plugins/iCheck/square/blue.css">
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Google Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
    <link href="~/Scripts/sweetalert.css" rel="stylesheet" />
</head>
<body style="background:aliceblue;">
    <div class="row">
        <div class="col-xs-12">

            <div class="col-xs-4">
                <table>
                    <tr>
                        <td>
                            <label style="color:#0f29ec; display:inline-block;font-size:20px;font-weight:bold;font-family:Verdana;margin-top: 26px;"> Welcome To @Html.DisplayFor(model => model.CompanyAppName) Portal</label>
                        </td>
                    </tr>
                    <tr>
                        <td height="2">  </td>
                    </tr>
                    <tr>
                        <td>
                            <label style="color:Green;font-size:15px;font-family:Verdana;">@Html.DisplayFor(model => model.Showday)</label>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="col-xs-1">

            </div>
            <div class="col-xs-3">
                <a href=@Html.DisplayFor(model => model.CompanyWebLink) target="_blank"><img src=@Html.DisplayFor(model => model.CompanyLogo) width="250" height="60" style="margin-top: 18px;"></a>
            
                @*<a href="http://www.enchanteaccessories.com/"><img src="../Images/ench_logo.JPG" width="250" height="60"></a>*@
            </div>
            <div class="col-xs-1" style="padding-top: 20px;">
            </div>
            <div class="col-xs-3">
                <table>
                    <tr>
                        <td style="padding-left:10px;">
                            <table>
                                <tr>
                                    <td colspan="3" style="text-align:center">
                                        <a href="http://www.gensoftcorp.com" target="_blank" style="display:inline-block;width:100%;  color:#0f29ec; text-decoration:underline;"><b>Powered By</b></a>
                                    </td>


                                </tr>
                                <tr>
                                    <td>
                                        <a href="http://www.gensoftcorp.com" target="_blank"><img src="../Images/gslogo.png" style="height:45px; width:160px;margin-left: 100px;"></a>
                                    </td>
                                </tr>
                                <tr>

                                    <td colspan="3" style="text-align:center">
                                        <a href="http://www.gensoftcorp.com" target="_blank" style="display:inline-block;width:100%;color:#0f29ec; text-decoration:underline;"><b>Gensoft Corp</b></a>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>

            </div>
        </div>
    </div>
    <div class="row" style="background-color:#0094ff;">

    </div>
    <div style="border-bottom-color:#0f29ec;">
        <hr style="border: 7px solid #0094ff;" />
        <h6 style="border-bottom:2px solid #ff3700;margin-top: -25px;"><label></label></h6>
        <div class="container">
            <div style="margin-top: 50px;" class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">

                <div id="ajaxLoading" style="display:none;"><img src="~/Images/ajax-loader.gif" /></div>

                <span class="lg-img">
                </span>



                @using (Html.BeginForm("UserLogin", "Login", FormMethod.Post, new { @enctype = "multipart/form-data" }))
                {

                    <div class="loginBox" id="loginPoupForm">
                        <h1 style="background-color: antiquewhite; color: darkblue;">@Html.DisplayFor(model => model.CompanyAppName) Portal Login</h1>
                          <div style="text-align:center;color:red">@ViewBag.ErrorMessage</div><br />
                        <div class="loginconentBox">
                            <div class="cstmText">

                                @Html.TextBoxFor(m => m.Email, new { @class = "inputmsg", @placeholder = "UserName",@style= "background-color: white; border: 1px solid lightblue;" })

                            </div>
                            <div class="cstmText">
                                @Html.TextBoxFor(m => m.Password, new { @class = "inputlock", @type = "Password", @placeholder = "Password", @style = "background-color: white; border: 1px solid lightblue;" })

                            </div>
                            <div class="cstmText clearfix">

                                <div class="checkboxRight">
                                    <a href="/ForgotPassword/ForgotPassword" class="forgotPass"> Forgot Password?</a>
                                </div>
                            </div>
                            <div class="cstmText">
                                <input onclick="return LoginAuthenticate();" type="button" class="loginBtn_Submit" value="Log In" id="btn_Login" style="background: #2196F3;font-size: 20px; color: white;"/>
                            </div>
                        </div>
                    </div>
                }

            </div>

        </div>
    </div>
    
</body>
</html>
<script src="../plugins/jQuery/jquery-3.1.1.min.js"></script>
<script src="../bootstrap/js/bootstrap.min.js"></script>
<script src="../plugins/iCheck/icheck.min.js"></script>
<script src="~/Scripts/sweetalert.js"></script>
<script>
        $(function () {
            $('input').iCheck({
                checkboxClass: 'icheckbox_square-blue',
                radioClass: 'iradio_square-blue',
                increaseArea: '20%'
            });
        });
</script>
<script>
       
    function LoginAuthenticate() {
        debugger;
            var Email = $("#Email").val();
            if (Email == "") {
                swal("Please Enter the User Name.")
                $('#Email').focus();
                $('body,html').animate({ scrollTop: 0 }, 0);
                er = 1;
                return false;
            }
            var Password = $("#Password").val();
            if (Password == "") {
                swal("Please Enter the Password.")
                $('#Password').focus();
                $('body,html').animate({ scrollTop: 0 }, 0);
                er = 1;
                return false;
            }
            else {
                var TeamDetailPostBackAddURL = '/login/UserLogin';

                $.ajax({
                    type: "POST",
                    url: TeamDetailPostBackAddURL,
                    data: { "Email": Email, "Password": Password },
                    datatype: "json",
                    success: function (data) {

                        if (data == "Username or password is incorrect")
                        {
                            swal("Username or password is incorrect");
                        }
                        else if (data == "LOGIN NOT ALLOWED") {
                            swal("Please Login through http://cdclive.gensoftcorp.com");
                        }
                        else if (data == "Password Expired")
                        {
                            swal({
                                title: "",
                                text: "Password Expired, Please Change the Password",
                                type: "",
                                showCancelButton: false,
                                confirmButtonClass: "btn-danger",
                                confirmButtonText: "Ok",
                                closeOnConfirm: true

                            },

                         function () {
                             debugger
                             setTimeout(function () {
                                 debugger
                                 var url = '@Url.Action("UserProfile", "UserProfile")';
                                 window.location.href = url;


                             });
                         });
                           
                        }
                        else
                        {
                            window.location.href = '@Url.Action("Dashboard", "DashBoard")';
                        }

                    },
                });

            }

        }
</script>
@{Html.RenderPartial("~/Views/Shared/_Popupnotification.cshtml");}
<script>
    $(document).ready(function()               
    {
        $(document).bind('keypress', function(e) {
            if(e.keyCode==13){
                $('#btn_Login').trigger('click');
            }
        });
    })
</script>

